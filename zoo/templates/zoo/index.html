{% extends "zoo/layout.html" %}

{% load static %}

{% block banner %}
    <!-- Banner -->
     <div class="banner">
        <div class="relative isolate flex items-center gap-x-6 overflow-hidden bg-gray-50 px-6 py-2.5 sm:px-3.5 sm:before:flex-1">
            <div class="absolute left-[max(-7rem,calc(50%-52rem))] top-1/2 -z-10 -translate-y-1/2 transform-gpu blur-2xl" aria-hidden="true">
            <div class="aspect-[577/310] w-[36.0625rem] bg-gradient-to-r from-[#097969] to-[#AFE1AF] opacity-30" style="clip-path: polygon(74.8% 41.9%, 97.2% 73.2%, 100% 34.9%, 92.5% 0.4%, 87.5% 0%, 75% 28.6%, 58.5% 54.6%, 50.1% 56.8%, 46.9% 44%, 48.3% 17.4%, 24.7% 53.9%, 0% 27.9%, 11.9% 74.2%, 24.9% 54.1%, 68.6% 100%, 74.8% 41.9%)"></div>
            </div>
            <div class="absolute left-[max(45rem,calc(50%+8rem))] top-1/2 -z-10 -translate-y-1/2 transform-gpu blur-2xl" aria-hidden="true">
            <div class="aspect-[577/310] w-[36.0625rem] bg-gradient-to-r from-[#088F8F] to-[#7FFFD4] opacity-30" style="clip-path: polygon(74.8% 41.9%, 97.2% 73.2%, 100% 34.9%, 92.5% 0.4%, 87.5% 0%, 75% 28.6%, 58.5% 54.6%, 50.1% 56.8%, 46.9% 44%, 48.3% 17.4%, 24.7% 53.9%, 0% 27.9%, 11.9% 74.2%, 24.9% 54.1%, 68.6% 100%, 74.8% 41.9%)"></div>
            </div>
            <div class="flex flex-wrap items-center gap-x-4 gap-y-2">
            <p class="text-sm leading-6 text-gray-900">
                <strong class="font-semibold">Safari Rides 2024 |</strong> Join us in Denver from October 7 – 31 to take an Adventurous leap <strong class="font-semibold">| Today : {{now}}</strong>
            </p>
            </div>
            <div class="flex flex-1 justify-end">
            </div>
        </div>
     </div>
{% endblock %}

{% block title %}
<!-- Title -->
    <p>Welcome to ZoomanJi, Your online Wildlife Botanical Zoological Park.</p>
{% endblock %}

{% block content %}
<!-- Gallery -->
<div>
    <div class="photos-grid-container gallery">
      <div class="main-photo">
        <img src="{% static 'animal_collage/lionhug.jpg' %}" alt="image" />
        <div class="overlay-text px-4">
            <p class="text-xl">
                The lion is a large cat of the genus Panthera, native to Africa and India.
                The proverbial “king of beasts,” the lion has been one of the best-known wild animals since earliest times.
                The members of a pride typically spend the day in several scattered groups that may unite to hunt or share a common meal.
            </p>
        </div>
      </div>
      <div>
        <div class="sub">
          <div class="img-box img1">
            <img src="{% static 'animal_collage/chimp.jpeg' %}" alt="image" />
            <div class="overlay-text2 px-4">
                <p class="text-xl">
                    The chimpanzee, also simply known as the chimp, is a species of great ape native to the forests of tropical Africa.
                </p>
            </div>
          </div>
          <div class="img-box img2">
            <img src="{% static 'animal_collage/tighug.jpg' %}" alt="image" />
            <div class="overlay-text3 px-4">
                <p class="text-xl">
                    The tiger is a member of the genus Panthera and the largest living cat species native to Asia famous for its ferociousness.
                </p>
            </div>
          </div>
          <div class="img-box img3">
            <img src="{% static 'animal_collage/giraffe.jpg' %}" alt="image" />
            <div class="overlay-text4 px-4">
                <p class="text-xl">
                    The giraffe is a large African hoofed mammal belonging to the genus Giraffa.
                    It is the tallest living terrestrial animal and the largest ruminant on Earth.
                </p>
            </div>
          </div>
          <div class="img-box img4">
            <img src="{% static 'animal_collage/ele2.jpg' %}" alt="image" />
            <div class="overlay-text5 px-4">
                <p class="text-xl">
                    Elephants are the largest living land animals.
                    The elephant's memory is much larger and denser compared to that of people - hence the saying 'elephants never forget'.
                </p>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<!-- Stats -->
<div class="bg-white py-24 sm:py-32">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <dl class="grid grid-cols-1 gap-x-8 gap-y-16 text-center lg:grid-cols-3">
        <div class="mx-auto flex max-w-xs flex-col gap-y-4">
          <dt class="text-base leading-7 text-gray-600">Annual Visitors</dt>
          <dd class="order-first text-3xl font-semibold tracking-tight text-gray-900 sm:text-5xl">100k +</dd>
        </div>

        <div class="mx-auto flex max-w-xs flex-col gap-y-4">
          <dt class="text-base leading-7 text-gray-600">Average Daily Revenue</dt>
          <dd class="order-first text-3xl font-semibold tracking-tight text-green-700 sm:text-5xl">₹25k +</dd>
        </div>
       
        <div class="mx-auto flex max-w-xs flex-col gap-y-4">
          <dt class="text-base leading-7 text-gray-600">Animal / Species</dt>
          <dd class="order-first text-3xl font-semibold tracking-tight text-gray-900 sm:text-5xl">{{animalcount}} +</dd>
        </div>

      </dl>
    </div>
</div>

<!-- Categories -->
<div>
    <div class="flex text-center justify-around p-4">
      {% for c in cat %}
        <div class="open-cat-modal hover:cursor-pointer" data-cat = {{c.id}} >
          <div class="bg-white max-w-md rounded overflow-hidden shadow-lg cat">
            <img src="{{ c.image.url }}" class="catimg" style="width: 100%; height: 420px; object-fit: fill;">
            <div class="px-6 py-4">
            <div class="font-bold text-xl mb-2">{{ c.name }} <span class="text-green-700">Kingdom</span></div>
              <p class="text-gray-700 text-base">
                {{ c.description}}
              </p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
</div>

<!-- Booking Tickets -->
<div class="bg-white py-24 sm:py-32">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      {% for b in booking %}
      <div class="mx-auto max-w-2xl sm:text-center">
        <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">{{b.heading}}</h2>
        <p class="mt-6 text-lg leading-8 text-gray-600">{{b.description}}</p>
      </div>
      <div class="mx-auto mt-16 max-w-2xl rounded-3xl ring-1 ring-gray-200 sm:mt-20 lg:mx-0 lg:flex lg:max-w-none">
        <div class="p-8 sm:p-10 lg:flex-auto">
          <h3 class="text-2xl font-bold tracking-tight text-gray-900">{{b.title}}</h3>
          <p class="mt-6 text-base leading-7 text-gray-600">{{b.subtitle}}</p>
          <div class="mt-10 flex items-center gap-x-4">
            <h4 class="flex-none text-sm font-semibold leading-6 text-green-600">What’s included</h4>
            <div class="h-px flex-auto bg-gray-100"></div>
          </div>
          <ul role="list" class="mt-8 grid grid-cols-1 gap-4 text-sm leading-6 text-gray-600 sm:grid-cols-2 sm:gap-6">
            {% for point in b.points %}
            <li class="flex gap-x-3">
              <svg class="h-6 w-5 flex-none text-green-600" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" />
              </svg>
              {{point}}
            </li>
            {% endfor %}
          </ul>
        </div>
        {% endfor %}
        <div class="-mt-2 p-2 lg:mt-0 lg:w-full lg:max-w-md lg:flex-shrink-0">
          <div class="rounded-2xl bg-gray-50 py-10 text-center ring-1 ring-inset ring-gray-900/5 lg:flex lg:flex-col lg:justify-center lg:py-16">
            <div class="mx-auto max-w-xs px-8">
              <p class="text-base font-semibold text-gray-600">Per Person,</p>
              <p class="mt-6 flex items-baseline justify-center gap-x-2">
                <span class="text-5xl font-bold tracking-tight text-gray-900">₹50</span>
                <span class="text-sm font-semibold leading-6 tracking-wide text-gray-600">IND</span>
              </p>
              <span href="#" class="open-payment-modal mt-10 block w-full rounded-md bg-green-500 hover:bg-green-400 text-white font-bold py-2 px-4 border-b-4 border-green-700 hover:border-green-500 rounded cursor-pointer">Book Now</span>
              <p class="mt-6 text-xs leading-5 text-gray-600">Invoices and receipts available for easy company reimbursement</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Payment Modal -->
<div class="paymentmodal relative z-10 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
  <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="false"></div>
    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
      <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
        <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
          <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                <div class="flex justify-between">
                  {% if is_open %}
                  <img class="hover: cursor-pointer w-16 h-16" src="{% static 'partial_imgs/open.png' %}">
                  <h3 class="text-2xl font-semibold text-gray-900 mb-4 text-center" id="modal-title">Proceed to Payment Gateway</h3>
                  {% else %}
                  <h3 class="text-2xl font-semibold text-gray-900 mb-4 text-center" id="modal-title">Payment Gateway Closed</h3>
                  {% endif %}
                  <div class="close-payment-modal">
                    <img class="hover: cursor-pointer" src="{% static 'partial_imgs/end.png' %}" alt="alt" width="30px">
                  </div>
                </div>
                {% if is_open %}
                <form action="{% url 'payment' %}" method="POST">
                  {% csrf_token %}
                  <div class="mt-2">
                    <label for="name">Name : </label>
                    <input type="text" name="name" placeholder="Add your name.">
                  </div>
                  <div class="mt-2">
                    <label for="quantity">Quantity : </label>
                    <input type="number" name="quantity" placeholder="Add number of people.">
                  </div>
                  <div class="mt-2">
                    <label for="name">Phone : </label>
                    <input type="number" name="phone" placeholder="Add phone number.">
                  </div>
                  <div class="mt-2">
                  <button type="submit" class="inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:w-auto">Purchase Ticket</button>
                  </div>
                </form>
                {% else %}
                <div class="flex justify-between m-3">
                  <img class="h-16 w-16" src="{% static 'partial_imgs/closed.png' %}" alt="Your Company">
                  <span class="m-5">Bookings only open from 9 AM to 7 PM.</span>
                </div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Category Modal -->
  <div class="catmodal relative z-10 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="false"></div>
      <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
          <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl">
            <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
              <div class="sm:flex sm:items-start">
                <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                  <div class="flex justify-between">
                    <h3 class="text-2xl font-semibold text-gray-900 my-4" id="modal-title"> Available in the <span class="text-green-600">Zoo</span></h3>
                    <div class="close-cat-modal">
                      <img class="hover: cursor-pointer" src="{% static 'partial_imgs/end.png' %}" alt="alt" width="50px">
                    </div>
                  </div>
                  <div id="modal-content">
                    <!-- Animals will be dynamically inserted here -->
                  </div>
                </div>
              </div>
            </div>
          <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
            <button type="button" class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto close-cat-modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>

    // Payment Modal
    const paymentmodal = document.querySelector('.paymentmodal');
    const openModalButton = document.querySelectorAll('.open-payment-modal');
    const closeModalButton = document.querySelectorAll('.close-payment-modal');

    openModalButton.forEach( element => {
      element.addEventListener('click', function() {
        paymentmodal.classList.remove('hidden');
        });
    });

    closeModalButton.forEach( element => {
      element.addEventListener('click', function() {
        paymentmodal.classList.add('hidden');
        });
    });

    // Category Modal
    const catmodal = document.querySelector('.catmodal');
    const openCatModalButtons = document.querySelectorAll('.open-cat-modal');
    const closeCatModalButton = document.querySelectorAll('.close-cat-modal');
    const modalContent = document.querySelector('#modal-content');

    openCatModalButtons.forEach(element => {
        element.addEventListener('click', () => {
            const categoryId = element.getAttribute('data-cat');
            fetch(`/zoo/get-animals/${categoryId}/`)
                .then(response => response.json())
                .then(data => {
                    modalContent.innerHTML = '';
                    if (data.animals.length > 0) {
                        data.animals.forEach(animal => {
                            const listItem = document.createElement('p');
                            listItem.classList.add('mb-4');
                            listItem.innerHTML = `
                                <h4 class="text-lg font-semibold m-5">${animal.name} - <span class="text-green-600">Availablity</span> ( ${animal.quantity} )</h4>
                                <p class="text-gray-600 m-5">${animal.description}</p>
                                <img src="${animal.image_url}" alt="image" style="width: 91%; height:400px; object-fit:fill" class="ml-5">
                            `;
                            modalContent.appendChild(listItem);
                        });
                    } else {
                        modalContent.innerHTML = '<li>No species found.</li>';
                    }
                    catmodal.classList.remove('hidden');
                })
                .catch(error => console.error('Error fetching animals:', error));
        });
    });

    closeCatModalButton.forEach( element => {
      element.addEventListener('click', function() {
          catmodal.classList.add('hidden');
        });
    });

  </script>

{% endblock %}
